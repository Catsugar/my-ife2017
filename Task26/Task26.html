<!DOCTYPE>
<html>
<head>
<meta charset="utf-8">
<title>任务四：听指令的小方块（一）</title>
<link type="text/css" href="Task26.css" rel="stylesheet" />
</head>
<body>
<div class="container">
    <h1>听指令的小方块</h1>
    <div id="box" class="box">
    <p>TRA LEF：左移一格<br>
    TRA TOP：上移一格<br>
    TRA RIG：右移一格<br>
    TRA BOT：下移一格<br>
    MOV LEF：转左移动一格<br>
    MOV TOP：转上移动一格<br>
    MOV RIG：转右移动一格<br>
    MOV BOT：转下移动一格</p>
    <div class="cell" id="cell"><img src="arrow.png" width="50" height="50"></div>
    <ul>
        <li><span class="row">1</span><span class="cols">1</span></li>
        <li><span class="row">2</span></li>
        <li><span class="row">3</span></li>
        <li><span class="row">4</span></li>
        <li><span class="row">5</span></li>
        <li><span class="row">6</span></li>
        <li><span class="row">7</span></li>
        <li><span class="row">8</span></li>
        <li><span class="cols">2</span></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li><span class="cols">3</span></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li><span class="cols">4</span></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li><span class="cols">5</span></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li><span class="cols">6</span></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li><span class="cols">7</span></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li><span class="cols">8</span></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
    </ul>
    </div>
    <div class="btnbox">
    <form>
        <input name="input" type="text" id="inputbox" >
        <input name="btn" type="button" id="btn" class="btn" value="执行">
    </form>
    </div>
</div>
<script type="text/javascript">
/***全局变量*****/
var cell=document.getElementById("cell");
var deg=0;//旋转的角度计数
/*****绑定按钮的事件*****/
function btn() {
	var btn=document.getElementById("btn");
	btn.onclick=function(){
		var action=document.getElementById("inputbox").value;
		if(action=="TRA LEF"){
			GO(0);
		}else if(action=="TRA BOT"){
			GO(1);
		}else if(action=="TRA RIG"){
			GO(2);
		}else if(action=="TRA TOP"){
			GO(3);
		}else if(action=="MOV LEF"){
			Turn(0);
			GO(0);
		}else if(action=="MOV BOT"){
			Turn(1);
			GO(1);
		}else if(action=="MOV RIG"){
			Turn(2);
			GO(2);
		}else if(action=="MOV TOP"){
			Turn(3);
			GO(3);
		}else{
			alert("输入有误，请重新输入");
		}
	}
}
btn();
/*****前进函数*****/
function GO(n){
	var cellTop=cell.offsetTop;
	var cellLeft=cell.offsetLeft;
	if(n===0 && cellLeft<364){//左走
	     cell.style.left=cellLeft+52+"px";
		 cell.style.transition="left 1000ms ease-in";
	}else if(n===1 && cellTop<364){//下走
		 cell.style.top=cellTop+52+"px"; 
		 cell.style.transition="top 1000ms ease-in";
	}else if(n===2 && cellLeft>0){//右走
		 cell.style.left=cellLeft+(-52)+"px";
		 cell.style.transition="left 1000ms ease-in";
	}else if(n===3 && cellTop>0){//上走
		cell.style.top=(cellTop-52)+"px"; 
	    cell.style.transition="top 1000ms ease-in";
	}else{ return;}
}

/*****左转函数*****/
function Turn(t){
switch(t)
{ 		
   case 1://转到下面
        cell.style.webkitTransform="rotate("+90+"deg)";
		cell.style.transform="rotate("+90+"deg)";
		cell.style.transition="transform 1000ms ease-in";
		cell.style.transition="-webkit-transform 1000ms ease-in";
		break;
   case 2://转到右边
        cell.style.webkitTransform="rotate("+180+"deg)";
		cell.style.transform="rotate("+180+"deg)";
		cell.style.transition="transform 1000ms ease-in";
		cell.style.transition="-webkit-transform 1000ms ease-in";
		break;
   case 3://转到上面
        cell.style.webkitTransform="rotate("+270+"deg)";
		cell.style.transform="rotate("+270+"deg)";
		cell.style.transition="transform 1000ms ease-in";
		cell.style.transition="-webkit-transform 1000ms ease-in";
		break;
   case 0://转到左边
        cell.style.webkitTransform="rotate("+0+"deg)";
		cell.style.transform="rotate("+0+"deg)";
		cell.style.transition="transform 1000ms ease-in";
		cell.style.transition="-webkit-transform 1000ms ease-in";
		break;
	default:
		return;
}
}
</script>
</body>
</html>