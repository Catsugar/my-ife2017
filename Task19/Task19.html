<!DOCTYPE>
<html>
<head>
<meta charset="utf-8">
<title>任务七：JavaScript和树（一）</title>
<link type="text/css" href="Task19.css" rel="stylesheet" />
</head>
<body>
<div id="container" class="container">
  <div id="tree">
    <div>
      <div>
        <div id="leftLeaf"></div>
        <div></div>
      </div>
      <div>
        <div></div>
        <div></div>
      </div>
    </div>
    <div>
      <div>
        <div></div>
        <div></div>
      </div>
      <div>
        <div></div>
        <div id="rightLeaf"></div>
      </div>
    </div>
  </div>
</div>
<div id="btns">
  <form>
    <input id="DLR" type="button" value="前序遍历">
    <input id="LDR" type="button" value="中序遍历">
    <input id="LRD" type="button" value="后序遍历">
    <input id="clear" type="button" value="清除屏幕">
  </form>
</div>
<script type="text/javascript">
/*****绑定按钮的事件*****/
function btn() {
  document.getElementById("DLR").onclick=function(){
	  var node=document.getElementById("tree");
	  preOrder(node);}
  document.getElementById("LDR").onclick=function(){
	  var node=document.getElementById("leftLeaf");
      inOrder(node);}
  document.getElementById("LRD").onclick=function(){
	  var node=document.getElementById("leftLeaf");
      postOrder(node);} 
  document.getElementById("clear").onclick=function(){
      clear();} 
}
btn();
/*****先序判断是否有黄孩子*****/
function test(node){
  var children=node.children;
  if(children.length===0){
	return node.parentNode; 
  }
  for(var i=0;i<children.length;i++){
    if(children[i].className!=="selected"){
	  return children[i];
	}
  }
  return node.parentNode;
}
/*****中序判断是否有黄孩子*****/
function test1(node){
  var parent=node.parentNode;
  var brother=node.parentNode.children[1];
  if(parent.length!==0 && parent.className!=="selected" ){
	return parent;  
  }else if(brother.length!==0 && brother.className!=="selected"){
	  return brother;
  }else{
	  return node.parentNode.children[0];
  }
  return 0;
}
/*****后序判断是否有黄孩子*****/
function test2(node){
  var parent=node.parentNode;
  var brother=node.parentNode.children[1];
  if(brother.length!==0 && brother.className!=="selected"){
	return brother;
  }else if(parent.length!==0 && parent.className!=="selected" ){
	return parent;  
  }else{
    return node.parentNode.children[0];
  }
  return 0;
}
//先序遍历
function preOrder(node){
 var timer=setTimeout(function(){
  if(!(node == null)){
	  /****变色和标记遍历过****/
	  node.style.backgroundColor="pink";
	  node.className="selected";
	  /****指定下一个遍历的节点***/
	  var nextnode=test(node);
	  /***判断是不是回到原点了****/
	  if(nextnode===document.getElementById("container")){
          clearTimeout(timer);
		  return;
	  }
	  preOrder(nextnode);
   }
 },500)
}
//中序遍历
function inOrder(node){
 var timer=setTimeout(function(){
  if(!(node == null)){
	  /****变色和标记遍历过****/
	  node.style.backgroundColor="pink";
	  node.className="selected";
	  /****指定下一个遍历的节点***/
	  var nextnode=test1(node);
	  /***判断是不是回到原点了****/
	  if(nextnode===document.getElementById("container")){
          clearTimeout(timer);
		  return;
	  }
	  preOrder(nextnode);
   }
 },500)
}
//后序遍历
function postOrder(node){
 var timer=setTimeout(function(){
  if(!(node == null)){
	  /****变色和标记遍历过****/
	  node.style.backgroundColor="pink";
	  node.className="selected";
	  /****指定下一个遍历的节点***/
	  var nextnode=test2(node);
	  /***判断是不是回到原点了****/
	  if(nextnode===document.getElementById("container")){
          clearTimeout(timer);
		  return;
	  }
	  preOrder(nextnode);
   }
 },500)
}
//清屏函数
function clear(){
	var divs=document.getElementById("container").getElementsByTagName("div");
	for(var i=0; i< divs.length;i++){
	  divs[i].style.backgroundColor="#ff9";
	  divs[i].className="";
	}
}
</script>
</body>
</html>